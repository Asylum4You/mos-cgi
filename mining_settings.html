#!/bin/bash

echo "Content-type: text/html"
echo ""

echo '<html>'
echo '<head>'
echo '<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">'
echo '<meta http-equiv="cache-control" content="no-cache, must-revalidate, post-check=0, pre-check=0" />'
echo '<meta http-equiv="cache-control" content="max-age=0" />'
echo '<meta http-equiv="expires" content="0" />'
echo '<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />'
echo '<meta http-equiv="pragma" content="no-cache" />'
echo '<title>MOS Device Management</title>'
echo '</head>'
echo '<body>'

mos_service="MON_amd"
this_service="AMD miner"
running=$(service $mos_service status)

## Navigation bare on top. Enter a new thing with its name and then spaces
echo 'Navigation Bar - Use this to navigate to get proper system information!!! <br>'
echo '<a href="index.html">Main Menu </a> >> '
echo '<a href="device_management.html">Device Management </a> >> '
echo '<br>'


echo "<h2>$this_service Management Submenu</h3><br><br>"
echo "<a href="amd_on.html">Turn $this_service Service On</a><br>"
echo "<a href="amd_off.html">Turn $this_service Service Off</a><br>"
echo "<a href="amd_configure.html">Configure $this_service</a><br>"

echo -e " \n \n <h2>$this_service status</h2>"

if [ "$(echo $running | grep dead)" ] ; then

echo "$this_service is not running<br>"

elif [ "$(echo $running | grep running)" ] ; then
echo "$this_service is running"

fi

# probably can't print configuration file because www-data doesn't have proper permissions



echo '</body>'
echo '</html>'

exit 0
